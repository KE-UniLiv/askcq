# AskCQ
A Comparative Study of Competency Question Elicitation Methods from Ontology Requirements

This repository contains the **AskCQ dataset**, Python code and a suite of Jupyter notebooks for the computational analysis of competency questions (CQs) generated by various approaches. The project provides tools for assessing the readability, complexity, relevance, and embeddings of CQs.

## Dataset

- **AskCQ Dataset:**  
  The main dataset is provided as [`data/askcq_dataset.csv`](data/askcq_dataset.csv).  
  Ensure this file is present in the `data/` directory before running any analysis notebooks.

## Repository Structure

- `askcq/`
  - `agreement.py`, `complexity.py`, `embedding.py`, , `utils.py`: core Python modules for data processing and analysis.
  - `prompts.py` includes all the prompts and system roles used in the experiments.
  - `config.py` provides the configuration used to prompt all the LLMs.
  - `cq_generation.ipynb`: LLM-based CQ generation and extraction from the user story.
  - `overview.ipynb`: Expert analysis overview, CQ feature exploration and data analysis.
  - `cq_readability.ipynb`: Computational readability analysis, with correlation analysis.
  - `cq_relevance.ipynb`: Relevance scoring and rationale extraction.
  - `cq_complexity.ipynb`: Complexity feature extraction and analysis from CQs.
  - `cq_embeddings.ipynb`: Embedding-based analysis.  
- `data/`: contains all the data provided to or generated by our experiments, including the AskCQ dataset (`askcq_dataset.csv`) and derived metrics.
- `plots/`: Output figures and plots generated by the notebooks.

## Reproducibility Instructions

### 1. Environment Setup

- Use Python 3.11+ (see `.pyc` files for version reference).
- Install dependencies:
  ```sh
  pip install -r requirements.txt
  ```
  If `requirements.txt` is not working on your system, install at least:
  ```
  pandas numpy matplotlib seaborn scikit-learn textstat readability openai google-generativeai tqdm
  ```
- Create an `api_config.yml` file within `askcq/` with your own Google (Gemini) and OpenAI (GPT) API keys by following the example below.

```yml
gemini:
  key: my-gemini-key

openai:
  key: my-openai-key
```

### 2. Running the Notebooks

Each notebook is self-contained and can be run independently. For full reproducibility:

- **Step 1:** Open the desired notebook (e.g., [`askcq/cq_readability.ipynb`](askcq/cq_readability.ipynb)) in Jupyter or VS Code.
- **Step 2:** Run all cells sequentially.  
  Notebooks expect the dataset files to be in the `data/` directory.
- **Step 3:** Outputs (plots, tables, CSVs) will be saved in the appropriate folders (`plots/`, `data/`).

**Note:** Some notebooks require API keys for LLMs (OpenAI, Gemini). Store your keys securely in `askcq/api_config.yml` (without pushing it!) and follow the prompts in the code to set them (see usage of `get_key` in `utils.py`).
